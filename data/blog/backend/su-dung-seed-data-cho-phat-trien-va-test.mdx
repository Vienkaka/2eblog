---
title: 'Migrations | 9. S·ª≠ d·ª•ng Seed Data cho Ph√°t tri·ªÉn v√† Ki·ªÉm th·ª≠'
thumnail: 'https://fastly.picsum.photos/id/244/4288/2848.jpg?hmac=R6j9PBP4aBk2vcEIoOPU4R_nuknizryn2Vq8GGtWTrM'
date: '2025-11-05T10:00:00Z'
lastmod: '2025-11-05T10:00:00Z'
tags: ['database', 'seed-data', 'development', 'testing', 'fixtures', 'backend']
draft: false
summary: 'H∆∞·ªõng d·∫´n chi ti·∫øt v·ªÅ s·ª≠ d·ª•ng seed data cho ph√°t tri·ªÉn v√† ki·ªÉm th·ª≠, bao g·ªìm chi·∫øn l∆∞·ª£c tri·ªÉn khai, v√≠ d·ª• th·ª±c t·∫ø, fixtures, v√† best practices ƒë·ªÉ qu·∫£n l√Ω d·ªØ li·ªáu m·ªôt c√°ch hi·ªáu qu·∫£.'
images:
  [
    'https://fastly.picsum.photos/id/244/4288/2848.jpg?hmac=R6j9PBP4aBk2vcEIoOPU4R_nuknizryn2Vq8GGtWTrM',
  ]
authors: ['default']
layout: PostLayout
canonicalUrl: https://gaoden.vercel.app/blog/backend/su-dung-seed-data-cho-phat-trien-va-test
---

## Gi·ªõi thi·ªáu

Seed data l√† d·ªØ li·ªáu ƒë∆∞·ª£c **t·∫£i s·∫µn v√†o database** khi m·ªôt ·ª©ng d·ª•ng ƒë∆∞·ª£c kh·ªüi t·∫°o ho·∫∑c trong qu√° tr√¨nh ki·ªÉm th·ª≠. N√≥ cung c·∫•p m·ªôt b·ªô d·ªØ li·ªáu **nh·∫•t qu√°n v√† c√≥ th·ªÉ d·ª± ƒëo√°n ƒë∆∞·ª£c**, cho ph√©p developer x√¢y d·ª±ng v√† ki·ªÉm th·ª≠ t√≠nh nƒÉng m√† kh√¥ng c·∫ßn ph·ª• thu·ªôc v√†o d·ªØ li·ªáu do ng∆∞·ªùi d√πng t·∫°o.

**Seed data** gi√∫p:

- ‚úÖ **Nh·∫•t qu√°n** ‚Äî t·∫•t c·∫£ developer l√†m vi·ªác v·ªõi c√πng m·ªôt b·ªô d·ªØ li·ªáu
- ‚úÖ **C√≥ th·ªÉ d·ª± ƒëo√°n** ‚Äî bi·∫øt tr∆∞·ªõc tr·∫°ng th√°i ban ƒë·∫ßu c·ªßa database
- ‚úÖ **Hi·ªáu qu·∫£** ‚Äî t·ª± ƒë·ªông h√≥a qu√° tr√¨nh t·∫°o d·ªØ li·ªáu
- ‚úÖ **B·∫£o v·ªá** ‚Äî c√°ch ly m√¥i tr∆∞·ªùng ph√°t tri·ªÉn kh·ªèi d·ªØ li·ªáu s·∫£n xu·∫•t

B√†i vi·∫øt n√†y s·∫Ω kh√°m ph√° c√°c **chi·∫øn l∆∞·ª£c tri·ªÉn khai seed data**, **best practices**, v√† c√°ch **qu·∫£n l√Ω hi·ªáu qu·∫£**.

---

## Hi·ªÉu v·ªÅ Seed Data

### ƒê·ªãnh nghƒ©a

**Seed data** l√† d·ªØ li·ªáu ƒë∆∞·ª£c **t·∫£i s·∫µn v√†o database** ƒë·ªÉ:

1. Cung c·∫•p m·ªôt tr·∫°ng th√°i ban ƒë·∫ßu nh·∫•t qu√°n
2. Cho ph√©p developer l√†m vi·ªác v·ªõi d·ªØ li·ªáu th·ª±c t·∫ø
3. H·ªó tr·ª£ ki·ªÉm th·ª≠ m·ªôt c√°ch c√≥ c·∫•u tr√∫c

### 4 M·ª•c ƒë√≠ch Ch√≠nh c·ªßa Seed Data

#### 1. **Ph√°t tri·ªÉn (Development)**

Cho ph√©p developer l√†m vi·ªác v·ªõi b·ªô d·ªØ li·ªáu th·ª±c t·∫ø m√† **kh√¥ng c·∫ßn t·∫°o th·ªß c√¥ng** ho·∫∑c **ph·ª• thu·ªôc v√†o d·ªØ li·ªáu kh√¥ng ·ªïn ƒë·ªãnh**.

```python
# Khi b·∫Øt ƒë·∫ßu ph√°t tri·ªÉn, b·∫°n c√≥ ngay:
# - 100 s·∫£n ph·∫©m m·∫´u
# - 50 ng∆∞·ªùi d√πng ki·ªÉm th·ª≠
# - C√°c danh m·ª•c s·∫£n ph·∫©m chu·∫©n
```

#### 2. **Ki·ªÉm th·ª≠ (Testing)**

Cung c·∫•p m·ªôt **tr·∫°ng th√°i ƒë√£ bi·∫øt** cho vi·ªác ki·ªÉm th·ª≠ c√°c k·ªãch b·∫£n kh√°c nhau.

```python
# Unit tests
def test_calculate_discount():
    product = Product.find_by_id(1)  # Bi·∫øt ch·∫Øc product #1 t·ªìn t·∫°i
    assert product.apply_discount(10) == expected_price

# Integration tests
def test_checkout_flow():
    user = User.find_by_id(1)  # Bi·∫øt ch·∫Øc user #1 t·ªìn t·∫°i
    cart = user.create_cart()
    # ... ki·ªÉm th·ª≠ flow
```

#### 3. **Tr√¨nh di·ªÖn (Demonstration)**

Tr√¨nh di·ªÖn c√°c t√≠nh nƒÉng c·ªßa ·ª©ng d·ª•ng cho ng∆∞·ªùi d√πng ho·∫∑c stakeholders.

#### 4. **Tr·∫°ng th√°i Ban ƒë·∫ßu (Initial State)**

Thi·∫øt l·∫≠p d·ªØ li·ªáu **thi·∫øt y·∫øu** ƒë·ªÉ ·ª©ng d·ª•ng ho·∫°t ƒë·ªông:

- T√†i kho·∫£n qu·∫£n tr·ªã vi√™n
- C√†i ƒë·∫∑t m·∫∑c ƒë·ªãnh
- Danh m·ª•c c∆° b·∫£n

---

## L·ª£i √≠ch c·ªßa Seed Data

| L·ª£i √≠ch                             | M√¥ t·∫£                                         | V√≠ d·ª•                                      |
| ----------------------------------- | --------------------------------------------- | ------------------------------------------ |
| **Nh·∫•t qu√°n (Consistency)**         | T·∫•t c·∫£ developer l√†m vi·ªác v·ªõi c√πng b·ªô d·ªØ li·ªáu | T·∫•t c·∫£ c√≥ 5 category gi·ªëng nhau            |
| **C√≥ th·ªÉ d·ª± ƒëo√°n (Predictability)** | Bi·∫øt tr∆∞·ªõc tr·∫°ng th√°i database                | Test lu√¥n ch·∫°y v·ªõi c√πng d·ªØ li·ªáu            |
| **Hi·ªáu qu·∫£ (Efficiency)**           | T·ª± ƒë·ªông h√≥a thay v√¨ nh·∫≠p th·ªß c√¥ng             | Ch·∫°y 1 script thay v√¨ nh·∫≠p 1000 d√≤ng       |
| **C√°ch ly (Isolation)**             | B·∫£o v·ªá d·ªØ li·ªáu s·∫£n xu·∫•t                       | Dev kh√¥ng x√≥a nh·∫ßm d·ªØ li·ªáu th·ª±c            |
| **L·∫∑p l·∫°i (Repeatability)**         | Ch·∫°y test nhi·ªÅu l·∫ßn v·ªõi c√πng d·ªØ li·ªáu          | `npm test` lu√¥n ch·∫°y v·ªõi d·ªØ li·ªáu nh·∫•t qu√°n |

---

## V√≠ d·ª• Seed Data t·ª´ C√°c ·ª®ng d·ª•ng Th·ª±c t·∫ø

### ·ª®ng d·ª•ng E-Commerce

```
Categories:
  - Electronics (ƒêi·ªán t·ª≠)
  - Clothing (Qu·∫ßn √°o)
  - Books (S√°ch)
  - Home Goods (ƒê·ªì gia d·ª•ng)

Products:
  - Smartphone (Category: Electronics, Price: $999)
  - T-Shirt (Category: Clothing, Price: $19)
  - Python Book (Category: Books, Price: $45)

Users:
  - admin@example.com (Role: Administrator)
  - customer1@example.com (Role: Customer)
  - customer2@example.com (Role: Customer)

Countries/States:
  - USA (50 states)
  - Vietnam (63 provinces)
```

### ·ª®ng d·ª•ng Social Media

```
Users:
  - john_doe (username)
  - jane_smith (username)
  - bob_wilson (username)

Posts:
  - "Hello World!" (by john_doe)
  - "Learning Python" (by jane_smith)

Comments:
  - "Great post!" (on Hello World post)

Hashtags:
  - #programming
  - #python
  - #webdev
```

### ·ª®ng d·ª•ng Project Management

```
Teams:
  - Engineering
  - Design
  - Marketing

Projects:
  - Website Redesign
  - Mobile App Launch

Tasks:
  - Homepage mockup (Project: Website Redesign)
  - API setup (Project: Mobile App)

Users (v·ªõi roles):
  - Alice (Admin)
  - Bob (Team Lead)
  - Charlie (Developer)
```

---

## Chi·∫øn l∆∞·ª£c Tri·ªÉn khai Seed Data

### 1Ô∏è‚É£ Manual Insertion (SQL Scripts)

Nh·∫≠p d·ªØ li·ªáu th·ªß c√¥ng b·∫±ng SQL scripts.

#### ∆Øu ƒëi·ªÉm

- ‚úÖ ƒê∆°n gi·∫£n, kh√¥ng c·∫ßn tool
- ‚úÖ D·ªÖ hi·ªÉu
- ‚úÖ Kh√¥ng ph·ª• thu·ªôc b√™n ngo√†i

#### Nh∆∞·ª£c ƒëi·ªÉm

- ‚ùå Ch·∫≠m v·ªõi d·ªØ li·ªáu l·ªõn
- ‚ùå Kh√≥ maintain
- ‚ùå Kh√¥ng l·∫∑p l·∫°i ƒë∆∞·ª£c

#### V√≠ d·ª•

```sql
-- Ch√®n danh m·ª•c
INSERT INTO categories (name, description) VALUES
('Electronics', 'Thi·∫øt b·ªã ƒëi·ªán t·ª≠ v√† ph·ª• ki·ªán'),
('Clothing', 'Qu·∫ßn √°o cho nam, n·ªØ, tr·∫ª em'),
('Books', 'S√°ch v√† t√†i li·ªáu');

-- Ch√®n s·∫£n ph·∫©m
INSERT INTO products (category_id, name, description, price) VALUES
(1, 'Smartphone', 'Smartphone cao c·∫•p v·ªõi nhi·ªÅu t√≠nh nƒÉng', 999.99),
(2, 'T-Shirt', '√Åo thun cotton tho·∫£i m√°i', 19.99),
(3, 'Python Guide', 'H∆∞·ªõng d·∫´n l·∫≠p tr√¨nh Python to√†n di·ªán', 45.99);

-- Ch√®n ng∆∞·ªùi d√πng
INSERT INTO users (username, password, email, role) VALUES
('admin', 'hashed_password', 'admin@example.com', 'administrator'),
('customer1', 'hashed_password', 'customer1@example.com', 'customer'),
('customer2', 'hashed_password', 'customer2@example.com', 'customer');
```

### 2Ô∏è‚É£ Seed Scripts (Python/Node.js)

Vi·∫øt scripts ƒë·ªÉ t·ª± ƒë·ªông ch√®n d·ªØ li·ªáu.

#### ∆Øu ƒëi·ªÉm

- ‚úÖ Hi·ªáu qu·∫£ h∆°n manual
- ‚úÖ D·ªÖ maintain
- ‚úÖ C√≥ th·ªÉ version control
- ‚úÖ L·∫∑p l·∫°i ƒë∆∞·ª£c

#### Nh∆∞·ª£c ƒëi·ªÉm

- ‚ùå C·∫ßn vi·∫øt v√† maintain script
- ‚ùå C√≥ th·ªÉ c·∫ßn external libraries

#### V√≠ d·ª• (Python)

```python
import sqlite3
from datetime import datetime

def seed_database():
    # K·∫øt n·ªëi database
    conn = sqlite3.connect('ecommerce.db')
    cursor = conn.cursor()

    try:
        # Ch√®n danh m·ª•c
        categories = [
            ('Electronics', 'Thi·∫øt b·ªã ƒëi·ªán t·ª≠'),
            ('Clothing', 'Qu·∫ßn √°o'),
            ('Books', 'S√°ch')
        ]
        cursor.executemany(
            "INSERT INTO categories (name, description) VALUES (?, ?)",
            categories
        )

        # Ch√®n s·∫£n ph·∫©m
        products = [
            (1, 'Smartphone', 'Smartphone cao c·∫•p', 999.99, datetime.now()),
            (2, 'T-Shirt', '√Åo thun', 19.99, datetime.now()),
            (3, 'Python Guide', 'H∆∞·ªõng d·∫´n Python', 45.99, datetime.now())
        ]
        cursor.executemany(
            """INSERT INTO products
               (category_id, name, description, price, created_at)
               VALUES (?, ?, ?, ?, ?)""",
            products
        )

        # Ch√®n ng∆∞·ªùi d√πng
        users = [
            ('admin', 'hashed_admin_pwd', 'admin@example.com', 'administrator'),
            ('customer1', 'hashed_pwd1', 'customer1@example.com', 'customer'),
            ('customer2', 'hashed_pwd2', 'customer2@example.com', 'customer')
        ]
        cursor.executemany(
            """INSERT INTO users
               (username, password, email, role)
               VALUES (?, ?, ?, ?)""",
            users
        )

        # Commit thay ƒë·ªïi
        conn.commit()
        print("‚úÖ Seed data inserted successfully!")

    except Exception as e:
        print(f"‚ùå Error: {e}")
        conn.rollback()
    finally:
        conn.close()

if __name__ == '__main__':
    seed_database()
```

#### V√≠ d·ª• (Node.js - Sequelize)

```javascript
const { sequelize, Category, Product, User } = require('./models')

async function seedDatabase() {
  try {
    // ƒê·∫£m b·∫£o tables t·ªìn t·∫°i
    await sequelize.sync()

    // Ch√®n danh m·ª•c
    const categories = await Category.bulkCreate([
      { name: 'Electronics', description: 'Thi·∫øt b·ªã ƒëi·ªán t·ª≠' },
      { name: 'Clothing', description: 'Qu·∫ßn √°o' },
      { name: 'Books', description: 'S√°ch' },
    ])

    // Ch√®n s·∫£n ph·∫©m
    await Product.bulkCreate([
      {
        categoryId: categories[0].id,
        name: 'Smartphone',
        description: 'Smartphone cao c·∫•p',
        price: 999.99,
      },
      {
        categoryId: categories[1].id,
        name: 'T-Shirt',
        description: '√Åo thun',
        price: 19.99,
      },
      {
        categoryId: categories[2].id,
        name: 'Python Guide',
        description: 'H∆∞·ªõng d·∫´n Python',
        price: 45.99,
      },
    ])

    // Ch√®n ng∆∞·ªùi d√πng
    await User.bulkCreate([
      {
        username: 'admin',
        password: 'hashed_pwd',
        email: 'admin@example.com',
        role: 'administrator',
      },
      {
        username: 'customer1',
        password: 'hashed_pwd',
        email: 'customer1@example.com',
        role: 'customer',
      },
      {
        username: 'customer2',
        password: 'hashed_pwd',
        email: 'customer2@example.com',
        role: 'customer',
      },
    ])

    console.log('‚úÖ Seed data inserted successfully!')
  } catch (error) {
    console.error('‚ùå Error:', error)
    process.exit(1)
  }
}

seedDatabase()
```

### 3Ô∏è‚É£ Migration Tools (Alembic)

D√πng migration tools ƒë·ªÉ qu·∫£n l√Ω seed data.

#### ∆Øu ƒëi·ªÉm

- ‚úÖ T√≠ch h·ª£p v·ªõi migration workflow
- ‚úÖ Sync v·ªõi schema changes
- ‚úÖ T·ª± ƒë·ªông √°p d·ª•ng
- ‚úÖ C√≥ th·ªÉ rollback

#### Nh∆∞·ª£c ƒëi·ªÉm

- ‚ùå C·∫ßn d√πng migration tool
- ‚ùå C·∫ßn h·ªçc syntax c·ª• th·ªÉ

#### V√≠ d·ª• (Alembic)

```python
from alembic import op
import sqlalchemy as sa

def upgrade():
    # Ch√®n danh m·ª•c
    op.bulk_insert(
        sa.table('categories',
            sa.column('name', sa.String()),
            sa.column('description', sa.String())
        ),
        [
            {'name': 'Electronics', 'description': 'Thi·∫øt b·ªã ƒëi·ªán t·ª≠'},
            {'name': 'Clothing', 'description': 'Qu·∫ßn √°o'},
            {'name': 'Books', 'description': 'S√°ch'}
        ]
    )

    # Ch√®n s·∫£n ph·∫©m
    op.bulk_insert(
        sa.table('products',
            sa.column('category_id', sa.Integer()),
            sa.column('name', sa.String()),
            sa.column('description', sa.String()),
            sa.column('price', sa.Float())
        ),
        [
            {
                'category_id': 1,
                'name': 'Smartphone',
                'description': 'Smartphone cao c·∫•p',
                'price': 999.99
            },
            {
                'category_id': 2,
                'name': 'T-Shirt',
                'description': '√Åo thun',
                'price': 19.99
            },
            {
                'category_id': 3,
                'name': 'Python Guide',
                'description': 'H∆∞·ªõng d·∫´n Python',
                'price': 45.99
            }
        ]
    )

    # Ch√®n ng∆∞·ªùi d√πng
    op.bulk_insert(
        sa.table('users',
            sa.column('username', sa.String()),
            sa.column('password', sa.String()),
            sa.column('email', sa.String()),
            sa.column('role', sa.String())
        ),
        [
            {
                'username': 'admin',
                'password': 'hashed_pwd',
                'email': 'admin@example.com',
                'role': 'administrator'
            },
            {
                'username': 'customer1',
                'password': 'hashed_pwd',
                'email': 'customer1@example.com',
                'role': 'customer'
            },
            {
                'username': 'customer2',
                'password': 'hashed_pwd',
                'email': 'customer2@example.com',
                'role': 'customer'
            }
        ]
    )

def downgrade():
    # X√≥a d·ªØ li·ªáu khi rollback
    op.execute("DELETE FROM products WHERE name IN ('Smartphone', 'T-Shirt', 'Python Guide')")
    op.execute("DELETE FROM categories WHERE name IN ('Electronics', 'Clothing', 'Books')")
    op.execute("DELETE FROM users WHERE username IN ('admin', 'customer1', 'customer2')")
```

### 4Ô∏è‚É£ Data Fixtures (JSON/YAML)

L∆∞u d·ªØ li·ªáu trong file JSON ho·∫∑c YAML.

#### ∆Øu ƒëi·ªÉm

- ‚úÖ D·ªØ li·ªáu ·ªü ƒë·ªãnh d·∫°ng d·ªÖ ƒë·ªçc
- ‚úÖ D·ªÖ chia s·∫ª v√† t√°i s·ª≠ d·ª•ng
- ‚úÖ Nhi·ªÅu framework h·ªó tr·ª£
- ‚úÖ T√°ch bi·ªát d·ªØ li·ªáu kh·ªèi logic

#### Nh∆∞·ª£c ƒëi·ªÉm

- ‚ùå C·∫ßn parse d·ªØ li·ªáu
- ‚ùå C√≥ th·ªÉ c·∫ßn external libraries

#### V√≠ d·ª• (JSON)

```json
{
  "categories": [
    {
      "id": 1,
      "name": "Electronics",
      "description": "Thi·∫øt b·ªã ƒëi·ªán t·ª≠"
    },
    {
      "id": 2,
      "name": "Clothing",
      "description": "Qu·∫ßn √°o"
    },
    {
      "id": 3,
      "name": "Books",
      "description": "S√°ch"
    }
  ],
  "products": [
    {
      "id": 1,
      "category_id": 1,
      "name": "Smartphone",
      "description": "Smartphone cao c·∫•p",
      "price": 999.99
    },
    {
      "id": 2,
      "category_id": 2,
      "name": "T-Shirt",
      "description": "√Åo thun",
      "price": 19.99
    },
    {
      "id": 3,
      "category_id": 3,
      "name": "Python Guide",
      "description": "H∆∞·ªõng d·∫´n Python",
      "price": 45.99
    }
  ],
  "users": [
    {
      "id": 1,
      "username": "admin",
      "password": "hashed_pwd",
      "email": "admin@example.com",
      "role": "administrator"
    },
    {
      "id": 2,
      "username": "customer1",
      "password": "hashed_pwd",
      "email": "customer1@example.com",
      "role": "customer"
    },
    {
      "id": 3,
      "username": "customer2",
      "password": "hashed_pwd",
      "email": "customer2@example.com",
      "role": "customer"
    }
  ]
}
```

#### Script load fixtures (Python)

```python
import json
import sqlite3

def load_fixtures(fixture_file):
    conn = sqlite3.connect('ecommerce.db')
    cursor = conn.cursor()

    with open(fixture_file, 'r') as f:
        data = json.load(f)

    try:
        # Ch√®n danh m·ª•c
        for category in data['categories']:
            cursor.execute(
                "INSERT INTO categories (name, description) VALUES (?, ?)",
                (category['name'], category['description'])
            )

        # Ch√®n s·∫£n ph·∫©m
        for product in data['products']:
            cursor.execute(
                """INSERT INTO products
                   (category_id, name, description, price)
                   VALUES (?, ?, ?, ?)""",
                (product['category_id'], product['name'],
                 product['description'], product['price'])
            )

        # Ch√®n ng∆∞·ªùi d√πng
        for user in data['users']:
            cursor.execute(
                """INSERT INTO users
                   (username, password, email, role)
                   VALUES (?, ?, ?, ?)""",
                (user['username'], user['password'],
                 user['email'], user['role'])
            )

        conn.commit()
        print("‚úÖ Fixtures loaded successfully!")

    except Exception as e:
        print(f"‚ùå Error: {e}")
        conn.rollback()
    finally:
        conn.close()

if __name__ == '__main__':
    load_fixtures('seed_data.json')
```

---

## So s√°nh C√°c Chi·∫øn l∆∞·ª£c

| Ti√™u ch√≠              | Manual SQL  | Seed Scripts       | Migration Tools  | Fixtures          |
| --------------------- | ----------- | ------------------ | ---------------- | ----------------- |
| **ƒê·ªô ph·ª©c t·∫°p**       | ‚≠ê          | ‚≠ê‚≠ê               | ‚≠ê‚≠ê‚≠ê           | ‚≠ê‚≠ê              |
| **D·ªÖ b·∫£o tr√¨**        | ‚ùå          | ‚úÖ                 | ‚úÖ               | ‚úÖ                |
| **C√≥ th·ªÉ l·∫∑p l·∫°i**    | ‚ùå          | ‚úÖ                 | ‚úÖ               | ‚úÖ                |
| **H·ªó tr·ª£ rollback**   | ‚ùå          | ‚ùå                 | ‚úÖ               | ‚ùå                |
| **D·ªÖ chia s·∫ª**        | ‚úÖ          | ‚ö†Ô∏è                 | ‚ö†Ô∏è               | ‚úÖ                |
| **T√≠ch h·ª£p workflow** | ‚ùå          | ‚úÖ                 | ‚úÖ               | ‚ö†Ô∏è                |
| **Ph√π h·ª£p cho**       | D·ªØ li·ªáu nh·ªè | D·ªØ li·ªáu trung b√¨nh | D·ªØ li·ªáu ph·ª©c t·∫°p | D·ªØ li·ªáu nh·ªè-trung |

---

## Ch·ªçn Chi·∫øn l∆∞·ª£c N√†o?

### Ch·ªçn Manual SQL khi:

- ‚úÖ D·ªØ li·ªáu r·∫•t nh·ªè (< 10 d√≤ng)
- ‚úÖ Kh√¥ng c·∫ßn l·∫∑p l·∫°i
- ‚úÖ M·ªôt l·∫ßn s·ª≠ d·ª•ng

### Ch·ªçn Seed Scripts khi:

- ‚úÖ D·ªØ li·ªáu trung b√¨nh (10-1000 d√≤ng)
- ‚úÖ C·∫ßn l·∫∑p l·∫°i
- ‚úÖ C·∫ßn t·ª± ƒë·ªông h√≥a

### Ch·ªçn Migration Tools khi:

- ‚úÖ D·ªØ li·ªáu ph·ª©c t·∫°p
- ‚úÖ C·∫ßn sync v·ªõi schema changes
- ‚úÖ C·∫ßn rollback capability

### Ch·ªçn Data Fixtures khi:

- ‚úÖ D·ªØ li·ªáu nh·ªè-trung b√¨nh
- ‚úÖ C·∫ßn chia s·∫ª d·ªÖ d√†ng
- ‚úÖ D·ªØ li·ªáu √≠t thay ƒë·ªïi

---

## Best Practices cho Seed Data

### ‚úÖ DO's (N√™n l√†m)

- ‚úÖ **Version control** seed data v·ªõi m√£ ·ª©ng d·ª•ng
- ‚úÖ **S·ª≠ d·ª•ng d·ªØ li·ªáu th·ª±c t·∫ø** ph·∫£n √°nh production data
- ‚úÖ **T√°ch bi·ªát** seed data theo environment (dev, test, prod)
- ‚úÖ **·∫®n danh h√≥a** d·ªØ li·ªáu nh·∫°y c·∫£m (password, email)
- ‚úÖ **C·∫≠p nh·∫≠t** seed data khi schema thay ƒë·ªïi
- ‚úÖ **T√°ch** seed data l·ªõn kh·ªèi migrations
- ‚úÖ **Idempotent** ‚Äî ch·∫°y l·∫ßn 2 kh√¥ng l·ªói

### ‚ùå DON'Ts (Kh√¥ng n√™n l√†m)

- ‚ùå **Kh√¥ng** l∆∞u d·ªØ li·ªáu s·∫£n xu·∫•t th·ª±c v√†o seed
- ‚ùå **Kh√¥ng** hardcode t·∫•t c·∫£ IDs/timestamps
- ‚ùå **Kh√¥ng** t·∫°o seed data qu√° l·ªõn (> 10MB)
- ‚ùå **Kh√¥ng** qu√™n c·∫≠p nh·∫≠t seed khi thay ƒë·ªïi schema
- ‚ùå **Kh√¥ng** ƒë·ªÉ seed data c√≥ th·ªÉ ch·∫°y l·ªói

---

## V√≠ d·ª• Th·ª±c t·∫ø: H·ªá th·ªëng Qu·∫£n l√Ω Th∆∞ vi·ªán

### T√¨nh hu·ªëng

Ph√°t tri·ªÉn h·ªá th·ªëng qu·∫£n l√Ω th∆∞ vi·ªán c·∫ßn:

- C√°c danh m·ª•c s√°ch (Fiction, Non-Fiction, Sci-Fi)
- M·ªôt s·ªë s√°ch m·∫´u v·ªõi t√°c gi·∫£ v√† ISBN
- M·ªôt v√†i th√†nh vi√™n th∆∞ vi·ªán

### Tri·ªÉn khai Seed Data

```python
# seeds/library_seed.py
import sqlite3
from datetime import datetime, timedelta

def seed_library():
    conn = sqlite3.connect('library.db')
    cursor = conn.cursor()

    try:
        # 1. Ch√®n danh m·ª•c
        categories = [
            ('Fiction', 'Ti·ªÉu thuy·∫øt'),
            ('Non-Fiction', 'S√°ch th·ª±c ti·ªÖn'),
            ('Sci-Fi', 'Khoa h·ªçc vi·ªÖn t∆∞·ªüng')
        ]
        cursor.executemany(
            "INSERT INTO categories (name, description) VALUES (?, ?)",
            categories
        )

        # 2. Ch√®n s√°ch
        books = [
            (1, '1984', 'George Orwell', '978-0451524935', 1949),
            (1, 'To Kill a Mockingbird', 'Harper Lee', '978-0061120084', 1960),
            (2, 'Sapiens', 'Yuval Harari', '978-0062316097', 2014),
            (3, 'Dune', 'Frank Herbert', '978-0441172719', 1965),
        ]
        cursor.executemany(
            """INSERT INTO books
               (category_id, title, author, isbn, publication_year)
               VALUES (?, ?, ?, ?, ?)""",
            books
        )

        # 3. Ch√®n th√†nh vi√™n
        expiry_date = (datetime.now() + timedelta(days=365)).isoformat()
        members = [
            ('member001', 'Alice Johnson', 'alice@example.com', 'active', expiry_date),
            ('member002', 'Bob Smith', 'bob@example.com', 'active', expiry_date),
            ('member003', 'Charlie Brown', 'charlie@example.com', 'inactive', expiry_date),
        ]
        cursor.executemany(
            """INSERT INTO members
               (member_id, name, email, status, membership_expiry)
               VALUES (?, ?, ?, ?, ?)""",
            members
        )

        conn.commit()
        print("‚úÖ Library seed data inserted!")

    except Exception as e:
        print(f"‚ùå Error: {e}")
        conn.rollback()
    finally:
        conn.close()

if __name__ == '__main__':
    seed_library()
```

### Idempotent Seeding

```python
def seed_library_idempotent():
    conn = sqlite3.connect('library.db')
    cursor = conn.cursor()

    try:
        # Ki·ªÉm tra xem d·ªØ li·ªáu ƒë√£ t·ªìn t·∫°i ch∆∞a
        cursor.execute("SELECT COUNT(*) FROM categories WHERE name = 'Fiction'")
        if cursor.fetchone()[0] > 0:
            print("‚ö†Ô∏è Seed data already exists, skipping...")
            return

        # Ch√®n n·∫øu ch∆∞a t·ªìn t·∫°i
        categories = [
            ('Fiction', 'Ti·ªÉu thuy·∫øt'),
            ('Non-Fiction', 'S√°ch th·ª±c ti·ªÖn'),
            ('Sci-Fi', 'Khoa h·ªçc vi·ªÖn t∆∞·ªüng')
        ]
        cursor.executemany(
            "INSERT INTO categories (name, description) VALUES (?, ?)",
            categories
        )

        # ... ch√®n data kh√°c ...

        conn.commit()
        print("‚úÖ Seed data inserted!")

    except Exception as e:
        print(f"‚ùå Error: {e}")
        conn.rollback()
    finally:
        conn.close()
```

---

## Environment-Specific Seed Data

### Chia t√°ch Seed Data theo Environment

```
seeds/
‚îú‚îÄ‚îÄ common.json          # D·ªØ li·ªáu chung
‚îú‚îÄ‚îÄ development.json     # Ch·ªâ cho dev
‚îú‚îÄ‚îÄ testing.json         # Ch·ªâ cho test
‚îî‚îÄ‚îÄ staging.json         # Ch·ªâ cho staging
```

### V√≠ d·ª•

```python
import os
import json

def load_environment_seeds():
    env = os.getenv('APP_ENV', 'development')

    # Load common seeds
    with open('seeds/common.json') as f:
        common = json.load(f)

    # Load environment-specific seeds
    with open(f'seeds/{env}.json') as f:
        env_specific = json.load(f)

    # Merge
    data = {**common, **env_specific}

    # Load v√†o database
    load_into_db(data)
```

---

## Best Practices Summary

| Th·ª±c h√†nh                    | L·ª£i √≠ch                 | V√≠ d·ª•                        |
| ---------------------------- | ----------------------- | ---------------------------- |
| **Idempotent**               | Ch·∫°y l·∫ßn 2 kh√¥ng l·ªói    | `IF NOT EXISTS` checks       |
| **Environment-specific**     | Dev/test/prod kh√°c nhau | Separate seed files          |
| **Anonymize**                | B·∫£o v·ªá d·ªØ li·ªáu nh·∫°y c·∫£m | Hash passwords, fake emails  |
| **Update regularly**         | Keep with schema        | C·∫≠p nh·∫≠t khi thay ƒë·ªïi schema |
| **Use realistic data**       | Ph√°t hi·ªán issues s·ªõm    | Real-like values             |
| **Separate from migrations** | D·ªÖ maintain             | Seed scripts ri√™ng           |
| **Version control**          | Track changes           | Git commit seed files        |

---

## K·∫øt lu·∫≠n

Seed data l√† **c√¥ng c·ª• quan tr·ªçng** cho ph√°t tri·ªÉn v√† ki·ªÉm th·ª≠:

**L·ª£i √≠ch ch√≠nh:**

- ‚úÖ **Nh·∫•t qu√°n** ‚Äî t·∫•t c·∫£ developer c√≥ d·ªØ li·ªáu gi·ªëng
- ‚úÖ **Hi·ªáu qu·∫£** ‚Äî t·ª± ƒë·ªông thay v√¨ nh·∫≠p th·ªß c√¥ng
- ‚úÖ **C√≥ th·ªÉ d·ª± ƒëo√°n** ‚Äî bi·∫øt tr∆∞·ªõc tr·∫°ng th√°i
- ‚úÖ **B·∫£o v·ªá** ‚Äî c√°ch ly kh·ªèi production

**Ch·ªçn chi·∫øn l∆∞·ª£c d·ª±a v√†o:**

- K√≠ch th∆∞·ªõc d·ªØ li·ªáu
- ƒê·ªô ph·ª©c t·∫°p
- T·∫ßn su·∫•t s·ª≠ d·ª•ng
- Integration workflow

**Nh·ªõ r·∫±ng:**

- ‚úÖ Lu√¥n **version control** seed data
- ‚úÖ D√πng **d·ªØ li·ªáu th·ª±c t·∫ø** ƒë·ªÉ ph√°t hi·ªán issues
- ‚úÖ T√°ch bi·ªát **theo environment**
- ‚úÖ **C·∫≠p nh·∫≠t** khi schema thay ƒë·ªïi
- ‚úÖ L√†m cho seed **idempotent**

V·ªõi seed data ƒë√∫ng c√°ch, b·∫°n c√≥ th·ªÉ:

- üöÄ **Ph√°t tri·ªÉn nhanh** m√† kh√¥ng ch·ªù d·ªØ li·ªáu
- üß™ **Ki·ªÉm th·ª≠ nh·∫•t qu√°n** v·ªõi d·ªØ li·ªáu gi·ªëng nhau
- üîÑ **Onboard developer m·ªõi** nhanh h∆°n
- üìä **T√°i hi·ªán bugs** d·ªÖ d√†ng
